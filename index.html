<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="reset.css" rel="stylesheet" as="style">
    <link href="style.css" rel="stylesheet" as="style">
    <link rel="icon" type="image/svg+xml" href="dwpmi_small.svg" sizes="any">
    <title>Dashboard Icon Generator</title>
</head>
<body>
    <main>
        <div class="card">
            <div class="titles">
                <h1 id="title-text" contenteditable>Click to edit title</h1>
                <h2 id="subtitle-text" contenteditable>Click to edit subtitle</h1>
            </div>
            <img src="dwpmi_lozenge.svg" title="DWP MI" class="logo" />
        </div>

        <section class="controls">
            <button id="subtitle-button">Toggle Subtitle</button>
        </section>


        <section class="instructions">
            <h3>Instructions</h3>

            <ol>
                <li>Appointment End to End</li>
                <li>Kickstart Regional & District</li>
                <li>Way to Work</li>
                <li>Weekly/Fortnightly Mandatory Attendance</li>
                <li>Labour Market Indicators</li>
                <li>Local Labour Market Intelligence Tool (LLMIT)</li>
                <li>UC Changes and Overpayments Report</li>
                <li>Retirement, Bereavement and Care</li>
                <li>File Load Analysis (FLA)</li>
                <li>Payment Timeliness (SSG)</li>
            </ol>
        </section>
    </main>

    <script>
        function storeData(element, key) {
            console.log(element, key)
            const doc = new DOMParser().parseFromString(element.innerHTML, 'text/html');
            const content = doc.body.textContent || "";
            console.log(content);

            element.innerHTML = content;
            localStorage.setItem(key, content);
        }

        const titleText = document.getElementById("title-text");
        const subtitleText = document.getElementById("subtitle-text");
        const subtitleButton = document.getElementById("subtitle-button");
        const subtitleDisplayState = localStorage.getItem("subtitle-show");

        // Set initial values
        titleText.innerHTML = localStorage.getItem("title") || "Click to edit title";
        subtitleText.innerHTML = localStorage.getItem("subtitle") || "Click to edit subtitle";
        if (subtitleDisplayState === "hide") {
            subtitleText.classList.add("hide");
        }

        // Store values
        titleText.addEventListener("focusout", () => storeData(titleText, "title"));
        subtitleText.addEventListener("focusout", () => storeData(subtitleText, "subtitle"));

        // Toggle subtitle
        subtitleButton.addEventListener("click", () => {
            subtitleText.classList.toggle("hide");

            const newState = localStorage.getItem("subtitle-show") === "hide" ? "show" : "hide";
            localStorage.setItem("subtitle-show", newState);
        });
    </script>
</body>
</html>

<!--
TODO:

Add logo
Auto resize to fit?
- text size dropdown?
Instructions
click and select all
favicon

x Save changes to local storage
    - including substitle display state

x Add subtitle text
x    - show or hide option?
-->